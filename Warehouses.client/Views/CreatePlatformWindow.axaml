<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Warehouses.client.ViewModels"
        xmlns:views="using:Warehouses.client.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="Warehouses.client.Views.CreatePlatformWindow"
        x:DataType="vm:CreatePlatformViewModel"
        Title="Создание площадки"
        Width="800" Height="670"
        CanResize="False"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="20,20,20,60">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                   Text="Создание новой площадки" 
                   FontSize="18" 
                   FontWeight="Bold" 
                   Margin="0,0,0,20"/>

        <!-- Название площадки -->
        <StackPanel Grid.Row="1" Margin="0,0,0,20">
            <TextBlock Text="Название площадки:" 
                       Margin="0,0,0,5"/>
            <TextBox Text="{Binding PlatformName}" 
                     Watermark="Введите название площадки"
                     Margin="0,0,0,10"/>
            
            <TextBlock Text="Время создания:" 
                       Margin="0,0,0,5"/>
            <TextBox Text="{Binding CreatedAtText}" 
                     Watermark="2025-07-02 18:24:00"
                     Margin="0,0,0,10"/>
            
            <Button Content="Загрузить доступные пикеты" 
                    Command="{Binding LoadPicketsCommand}"
                    HorizontalAlignment="Left"
                    Margin="0,10,0,0"
                    Padding="15,8"/>
        </StackPanel>

                 <!-- Выбор пикетов -->
         <StackPanel Grid.Row="2" Margin="0,0,0,20">
             <TextBlock Text="Выберите пикеты для площадки:" 
                        FontWeight="Bold" 
                        Margin="0,0,0,10"/>
             <TextBlock Text="Сначала введите название площадки и время создания, затем нажмите 'Загрузить доступные пикеты'" 
                        FontStyle="Italic"
                        Foreground="Gray"
                        Margin="0,0,0,10"/>
             
             <ScrollViewer Height="300" 
                          VerticalScrollBarVisibility="Auto">
                 <ItemsControl ItemsSource="{Binding AvailablePickets}">
                     <ItemsControl.ItemTemplate>
                         <DataTemplate>
                             <CheckBox Content="{Binding DisplayName}"
                                       IsChecked="{Binding IsSelected}"
                                       Margin="5,2"
                                       FontSize="14"/>
                         </DataTemplate>
                     </ItemsControl.ItemTemplate>
                 </ItemsControl>
             </ScrollViewer>
             
             <TextBlock Text="{Binding SelectedPicketsCount}" 
                        Margin="0,10,0,0"
                        FontStyle="Italic"
                        Foreground="Gray"/>
         </StackPanel>

        <!-- Кнопки -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,30,0,30">
            <Button Content="Отмена" 
                    Command="{Binding CancelCommand}"
                    Margin="0,0,10,0"
                    Padding="20,8"/>
            
            <Button Content="Создать" 
                    Command="{Binding CreateCommand}"
                    Background="#4CAF50"
                    Foreground="White"
                    Padding="20,8"/>
        </StackPanel>

        <!-- Индикатор загрузки -->
        <views:LoadingOverlay Grid.Row="1" Grid.RowSpan="2"
                              DataContext="{Binding LoadingOverlay}"/>
    </Grid>
</Window> 